"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[5478],{"./packages/matrix/dist/chsk-matrix.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Br:()=>HeatMap,D6:()=>UpSetBar,F0:()=>UpSet,WL:()=>HeatMapCells,Wf:()=>isHeatMapData,ad:()=>HeatMapHighlight,by:()=>isUpSetData,eT:()=>HeatMapRectangle,hI:()=>UpSetGrid,iC:()=>UpSetMemberships,jE:()=>HeatMapSurface,oT:()=>HeatMapCircle});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),framer_motion__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/framer-motion/dist/es/components/LazyMotion/index.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/features-animation.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion-minimal.mjs"),_chsk_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_chsk_band__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/band/dist/chsk-band.es.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(e,n){if(null==e)return{};var t={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==n.indexOf(i))continue;t[i]=e[i]}return t}var $=["container","keys","data","dataSize","scaleX","scaleY","scaleColor","scaleSize","children"],ee={variant:"band",padding:0},HeatMap=function HeatMap(n){var t=n.container,i=void 0===t?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.WdC:t,r=n.keys,o=n.data,s=n.dataSize,w=n.scaleX,_=void 0===w?ee:w,N=n.scaleY,j=void 0===N?ee:N,C=n.scaleColor,P=n.scaleSize,M=void 0===P?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ooi:P,R=n.children,L=_objectWithoutPropertiesLoose(n,$),A=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FgM)(),W=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.uK4)(i),B=W.dimsProps,V=W.origin,D=W.innerSize,E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(o)}),[o]),I=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return o.map((function(e){return e.id}))}),[o]),O=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n,t){var i=e.map((function(e){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIU)(e)})),r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(t);return n.map((function(e,n){var o,a=e.id,l=r[a],s=null!=(o=null==t?void 0:t[null!=l?l:0])?o:{id:a};return{id:a,index:n,value:i.map((function(n){return n(e)})),size:i.map((function(e){return Number(e(s))}))}}))}(r,o,s)}),[r,o,s]),X=function(e,n,t,i,r){var o={x:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(t),y:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(i)};return o.x.domain=n,o.x.size=r[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],o.y.domain=e,o.y.size=r[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],o}(I,r,_,j,D),Y=X.x,F=X.y,U=function(e,n){if("categorical"===n.variant){var t=new Set(e.map((function(e){return e.value})).flat().map(String));return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(n,Array.from(t))}var i=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(e.map((function(e){return e.value})).flat().map(Number).filter(isFinite));return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(n,i)}(O,null!=C?C:A.Color.sequential),q=function(e,n,t,i,r){var o=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Fp7)(e.map((function(e){return e.size})).flat()),a=Math.min(t[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]/i.length,t[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X]/r.length)/2;return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__._C2)(n,o,a)}(O,M,D,I,r),G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.cT_)({x:Y,y:F,color:U,size:q});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.PzT,_extends({variant:"heatmap",position:V,size:B.size,padding:B.padding,originalData:o,processedData:O,seriesIndexes:E,keys:r,scalesContextValue:G},L,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_3__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_4__.H,children:R})}))},te=["x","y","width","height","style"],HeatMapCircle=function HeatMapCircle(e){var n=e.x,t=e.y,i=e.width,r=e.height,o=e.style,a=_objectWithoutPropertiesLoose(e,te),l={fill:null==o?void 0:o.fill,r:Math.min(i,r)/2};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.circle,_extends({},a,{initial:l,animate:l,exit:l,cx:n,cy:t,style:_extends({},o,{fill:void 0})}))},ie=["x","y","width","height"],HeatMapSimpleRectangle=function HeatMapSimpleRectangle(e){var n=e.x,t=e.y,i=e.width,r=e.height,o=_objectWithoutPropertiesLoose(e,ie);return delete o.cellSize,delete o.cellValue,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",_extends({x:n-i/2,y:t-r/2,height:r,width:i},o))},re=["x","y","width","height","style"],HeatMapRectangle=function HeatMapRectangle(e){var n=e.x,t=e.y,i=e.width,r=e.height,o=e.style,a=_objectWithoutPropertiesLoose(e,re),l={fill:null==o?void 0:o.fill};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({},a,{initial:l,animate:l,exit:l,x:n-i/2,y:t-r/2,height:r,width:i,style:_extends({},o,{fill:void 0})}))},isHeatMapData=function isHeatMapData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e})).every(Boolean)},isHeatMapSetting=function isHeatMapSetting(e,n){return function isHeatMapProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"value"in e&&"size"in e})).every(Boolean)}(e)&&(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y7R)(n.x)&&(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y7R)(n.y)},oe=["ids","keys","cells","component","componentProps","scaleColor","scaleSize","dataComponent","className","style","setRole","children"],HeatMapCells=function HeatMapCells(t){var i,r=t.ids,o=t.keys,a=t.cells,l=t.component,s=void 0===l?HeatMapSimpleRectangle:l,c=t.componentProps,d=t.scaleColor,h=t.scaleSize,f=t.dataComponent,m=void 0===f?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Wnl:f,v=t.className,p=t.style,y=t.setRole,x=void 0===y||y,g=t.children,b=_objectWithoutPropertiesLoose(t,oe),z=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),S=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)(),k=S.scales,w=z.data,B=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(r,o,z),V=B.idSet,D=B.keySet;if(!isHeatMapSetting(w,k))return null;var E=d?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.rio)(d):k.color,I=h?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Pur)(h):k.size,O=I(null!=(i=I.domain()[1])?i:0),X=isFinite(O),Y=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n,t){var i={};return e?e.forEach((function(e){var n,t=e[0],r=e[1];i[t]||(i[t]=new Set),null==(n=i[t])||n.add(r)})):Array.from(n).forEach((function(e){i[e]=t})),function(e,n){var t,r;return null!=(t=null==(r=i[e])?void 0:r.has(n))&&t}}(a,V,D)}),[a,V,D]),F=k.x,U=k.y,q=z.keys.map((function(e){return F(e)})),G=k.x.bandwidth(),H=k.y.bandwidth(),J=G/H,T=_extends({},c,{className:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("cell",v)}),Z=w.map((function(e){if(!V.has(e.id))return null;var t=U(e.id),i=e.value,r=e.size;return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.RGn)(e.value).map((function(o){var a=String(z.keys[o]);if(!Y(e.id,a))return null;var l=E(i[o]),u=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(p,l),c=r[o],d=2*(void 0!==c?I(c):O);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(m,_extends({key:"cell-"+e.index+"-"+o,component:s,data:{id:e.id,key:a,data:Number(i[o]),size:c},props:_extends({},T,{cellValue:i[o],cellSize:c,x:Number(q[o]),y:t,width:X?J>1?d*J:d:G,height:X?J>1?d:d/J:H,style:u})},b))}))})).flat().filter(Boolean);if(0===Z.length&&!g)return null;var $=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(S);return $.scales.color=E,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:x?"heatmap-cells":void 0,children:[Z,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.irH,{value:$,children:g},"provider")]})},ae=["ids","keys","interactive","edgeAnimation","tooltipAlign","className","setRole","style"],HeatMapHighlightMask=function HeatMapHighlightMask(e,n,t,i,r){var o=n[0],a=n[1],l={initial:r?{width:0,height:0}:void 0,style:t,className:i};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0])}},l),"top-left"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate("+o+",0)rotate(90)",animate:{height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(o-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][1]),width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0])}},l),"top-right"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate(0,"+a+")rotate(-90)",animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(a-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][1]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0])}},l),"bottom-left"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate("+o+","+a+")rotate(180)",animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(o-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][1]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(a-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][1])}},l),"bottom-right")]})},HeatMapHighlight=function HeatMapHighlight(n){var a=n.ids,l=n.keys,s=n.interactive,u=void 0===s||s,h=n.edgeAnimation,m=void 0!==h&&h,v=n.tooltipAlign,p=void 0===v?[.5,.5]:v,y=n.className,x=n.setRole,g=void 0===x||x,b=n.style,z=_objectWithoutPropertiesLoose(n,ae),S=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),k=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,w=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Bs9)().size,C=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),P=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),R=P[0],L=P[1],A=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0),W=A[0],F=A[1],U=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lLG)().setData,q=S.data,G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(a,l,S),H=G.idSet,J=G.keySet,T=G.idArray,Z=G.keyArray;if(!isHeatMapSetting(q,k))return null;var $=k.x,ee=k.y,ne=k.color,te=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n,t,i){return[(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ax7)(e,i),(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ax7)(n,t)]}($,ee,H,J)}),[$,ee,H,J]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(!u){var e=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(te[0]),n=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(te[1]);L([e,n])}}),[te,L]);var ie=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var n;null==(n=z.handlers)||null==n.onClick||n.onClick(W,e)}),[W,z.handlers]),re=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var n;null==(n=z.handlers)||null==n.onMouseLeave||n.onMouseLeave(W,e),L(null),U({})}),[W,L,U,z.handlers]),oe=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var n,t,i;if(null!==C&&null!==C.current){var r=C.current.getBoundingClientRect(),o=r.x,a=r.y,l=[e.clientX-o,e.clientY-a];if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.sn2)(l,R)){var s=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.CXu)(l,te),u=s.indexes,h=s.zone;if(null!==h){var f=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.ueV)([h[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0],h[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0]],(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gCP)(h),p),m=f[0],v=f[1],y=u[0],x=u[1],g=String(T[x]),b=String(Z[y]),S=Number(null==(n=q[x])?void 0:n.value[y]),k=null==(t=q[x])?void 0:t.size[y],w={id:g,key:b,data:S,size:k,label:(null===S||isNaN(Number(S))?"":"value: "+S)+" "+(null===k||isNaN(Number(k))?"":"size: "+k),color:ne(S)};null==(i=z.handlers)||null==i.onMouseEnter||i.onMouseEnter(w,e),F(w),U({x:m,y:v,title:g+", "+b,data:[w]}),L(h)}else re(e)}}}),[te,C,R,L,z.handlers]),le=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{ref:C,role:g?"heatmap-detector":void 0,width:w[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],height:w[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],style:{opacity:0},onMouseMove:oe,onMouseLeave:re,onClick:ie},"detector"),se=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("heatmap-highlight",y);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:"heatmap-highlight",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.JjT,{role:g?"heatmap-highlight-mask":void 0,visible:null!==R,firstRender:!1,children:null===R?null:HeatMapHighlightMask(R,w,b,se,m)},"mask"),u?le:null]})},getInterval=function getInterval(e,n,t){var i=n.bandwidth(),r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(Array.from(e).map(n));return[r[0]-t[0]*i,r[1]+t[1]*i]},HeatMapSurface=function HeatMapSurface(e){var n=e.ids,t=e.keys,i=e.expansion,r=void 0===i?[[0,0],[0,0]]:i,o=e.className,a=e.setRole,l=void 0===a||a,u=e.style,c=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),d=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,h=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(n,t,c),f=h.idSet,m=h.keySet;if(0===f.size||0===m.size)return null;var v=getInterval(f,d.y,r[0]),p=getInterval(m,d.x,r[1]),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("heatmapSurface",o),x={x:p[0],y:v[0],width:p[1]-p[0],height:v[1]-v[0]};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,{role:l?"heatmap-surface":void 0,initial:x,animate:x,className:y,style:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.dJS)(u,x)},"s-"+Array.from(f).join(",")+"-"+Array.from(m).join(","))},le=["container","data","horizontal","scaleIndex","scaleMembership","scaleColor","children"],se={variant:"band",padding:.25},UpSet=function UpSet(n){var t=n.container,i=void 0===t?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.WdC:t,r=n.data,o=n.horizontal,s=void 0===o||o,f=n.scaleIndex,m=void 0===f?se:f,v=n.scaleMembership,z=void 0===v?se:v,k=n.scaleColor,w=n.children,_=_objectWithoutPropertiesLoose(n,le),N=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FgM)(),j=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.uK4)(i),C=j.dimsProps,P=j.origin,M=j.innerSize,R=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(r)}),[r]),L=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return r.map((function(e){return e.id}))}),[r]),A=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n){var t={};e.map((function(e,n){var i=1<<n;new Set(e.data).forEach((function(e){var n=String(e);t[n]||(t[n]=0),t[n]+=i}))}));var i=Array(Math.pow(2,e.length)).fill(0);Object.values(t).forEach((function(e){i[e]+=1}));var r=i.map((function(e,n){return e?[n,e]:null})).filter(Boolean);return r.sort((function(e,n){return n[1]-e[1]})),{keys:r.map((function(e){return String(e[0])})),processedData:e.map((function(e,t){var i=e.id,o=1<<t;return{id:i,index:t,horizontal:n,data:r.map((function(e){return(e[0]&o)>0?e[1]:0}))}}))}}(r,s)}),[r,s]),W=A.keys,B=A.processedData,V=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n,t,i,r,o){var a=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(i);a.domain=e;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(r);l.domain=n;var s={x:t?l:a,y:t?a:l};return s.x.size=o[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],s.y.size=o[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],s}(L,W,s,m,z,M)}),[L,W,s,m,z,C]),D=V.x,E=V.y,I=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(null!=k?k:N.Color.categorical,[""]),O=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.cT_)({x:D,y:E,color:I});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.PzT,_extends({variant:"upset",position:P,size:C.size,padding:C.padding,originalData:r,processedData:B,seriesIndexes:R,keys:W,scalesContextValue:O},_,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_3__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_4__.H,children:w})}))},isUpSetData=function isUpSetData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"data"in e})).every(Boolean)},isUpSetProcessedData=function isUpSetProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"data"in e})).every(Boolean)},ue=["size","padding","scaleIndex","scaleValue","scaleColor","children"],UpSetBar=function UpSetBar(n){var t,i,r=n.size,o=n.padding,a=void 0===o?[0,0,0,0]:o,l=n.scaleIndex,s=void 0===l?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Us:l,u=n.scaleValue,h=void 0===u?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Tx9:u,f=n.scaleColor,m=n.children,v=_objectWithoutPropertiesLoose(n,ue),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Bs9)(),x=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,g=p.data;if(!isUpSetProcessedData(g)||0==g.length)return null;var b=null!=(t=null==(i=g[0])?void 0:i.horizontal)&&t,z=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n){var t=[];return n.map((function(n,i){var r=0;e.forEach((function(e){e.data[i]&&(r=Number(e.data[i]))})),t.push({id:n,value:r})})),t}(g,p.keys)}),[g,p]),S=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n,t){return{position:e?[0,-n]:[t[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],0],size:e?[t[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],n]:[n,t[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]]}}(b,r,y.size)}),[b,y]),k={position:S.position,positionUnits:"absolute",size:S.size,sizeUnits:"absolute",padding:a};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_band__WEBPACK_IMPORTED_MODULE_6__.$Q,_extends({container:k,data:z,keys:["value"],horizontal:!b,scaleIndex:s,scaleValue:h,scaleColor:null!=f?f:{variant:"categorical",domain:x.color.domain(),colors:[x.color(0)]}},v,{children:m}))},UpSetGrid=function UpSetGrid(e){var t,i=e.symbol,r=void 0===i?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Cdc:i,o=e.symbolStyle,a=e.className,l=e.setRole,s=void 0!==l&&l,u=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),c=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,d=u.data;if(!isUpSetProcessedData(d)||0==d.length)return null;var h=null==(t=d[0])?void 0:t.horizontal,f=h?c.y:c.x,m=h?c.x:c.y,v=Math.min(f.bandwidth(),m.bandwidth())/2,p=f.domain().map((function(e,t){var i=f(e);return m.domain().map((function(e,l){var u=m(e);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(r,{key:"cell-"+t+"-"+l,cx:h?u:i,cy:h?i:u,r:v,className:a,style:o,setRole:s})}))})).flat().filter(Boolean);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:"upset-grid",children:p})},UpSetMembership=function UpSetMembership(e){var t=e.positions,i=e.r,r=e.symbol,o=void 0===r?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Cdc:r,a=e.line,l=void 0===a?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.x12:a,s=e.symbolStyle,u=e.lineStyle,h=e.className,m=e.setRole,v=void 0!==m&&m,p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(t.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X]}))),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(t.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]}))),x=p[0]!=p[1]||y[0]!=y[1],g=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("upSetMembership",h),b=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(l,{key:"line",x1:p[0],x2:p[1],y1:y[0],y2:y[1],style:u,className:g,setRole:v}),z=t.map((function(e,t){return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(o,{key:"symbol-"+t,cx:e[0],cy:e[1],r:i,style:s,className:g,setRole:v})}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:"upset-membership",children:[x?b:null,z]})},UpSetMemberships=function UpSetMemberships(e){var t,i=e.component,r=void 0===i?UpSetMembership:i,o=e.componentProps,a=e.symbol,l=e.line,s=e.symbolStyle,u=e.lineStyle,c=e.style,d=e.className,h=e.setRole,f=void 0===h||h,m=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),v=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,p=m.data;if(!isUpSetProcessedData(p)||0==p.length)return null;var y=null==(t=p[0])?void 0:t.horizontal,x=y?v.y:v.x,g=y?v.x:v.y,b=v.color,z=Math.min(x.bandwidth(),g.bandwidth())/2,S=p.map((function(e){return e.id})),k=_extends({setRole:!1},o,{r:z,symbol:a,symbolStyle:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(s,b("")),line:l,lineStyle:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(u,b("")),className:d}),w=m.keys.map((function(e,t){var i=[];return S.map((function(n,r){var o,a;(null!=(o=null==(a=p[r])?void 0:a.data[t])?o:0)>0&&i.push([x(n),g(e)])})),y&&(i=i.map((function(e){return[e[1],e[0]]}))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(r,_extends({key:"m-"+e},k,{positions:i}))}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:f?"upset-memberships":void 0,style:c,children:w})}}}]);