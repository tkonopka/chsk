"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[3449],{"./packages/band/stories/quantiles/QuantileTooltip.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TableFormat:()=>TableFormat,Tooltip:()=>Tooltip,__namedExportsOrder:()=>__namedExportsOrder,default:()=>QuantileTooltip_stories});var chsk_core_es=__webpack_require__("./packages/core/dist/chsk-core.es.js"),predicates=__webpack_require__("./packages/band/src/quantiles/predicates.ts"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),InformationTable=function InformationTable(_ref){var position=_ref.position,size=_ref.size,labels=_ref.labels,values=_ref.values,className=_ref.className,style=_ref.style;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[labels.map((function(label,i){return(0,jsx_runtime.jsx)("text",{x:position[chsk_core_es.X],y:position[chsk_core_es.Y]+i*size[chsk_core_es.Y],className:className+" label",style,children:void 0!==values[i]?label+":":""},"label-"+i)})),values.map((function(value,i){return(0,jsx_runtime.jsx)("text",{x:position[chsk_core_es.X]+size[chsk_core_es.X],y:position[chsk_core_es.Y]+i*size[chsk_core_es.Y],className:className+" value",style,children:null!=value?value:""},"value-"+i)}))]})},QuantileTooltipItem=function QuantileTooltipItem(_ref2){var _ref2$position=_ref2.position,position=void 0===_ref2$position?[0,0]:_ref2$position,data=_ref2.data,_ref2$padding=_ref2.padding,padding=void 0===_ref2$padding?chsk_core_es.WO3.padding:_ref2$padding,color=_ref2.color,_ref2$r=_ref2.r,r=void 0===_ref2$r?chsk_core_es.WWF.r:_ref2$r,_ref2$symbol=_ref2.symbol,symbol=void 0===_ref2$symbol?chsk_core_es.bK0:_ref2$symbol,symbolStyle=_ref2.symbolStyle,label=_ref2.label,labelStyle=_ref2.labelStyle,_ref2$labelDistance=_ref2.labelDistance,labelDistance=void 0===_ref2$labelDistance?chsk_core_es.WWF.labelDistance:_ref2$labelDistance,_ref2$valueFormat=_ref2.valueFormat,valueFormat=void 0===_ref2$valueFormat?function(x){return String(x)}:_ref2$valueFormat,_ref2$cellSize=_ref2.cellSize,cellSize=void 0===_ref2$cellSize?[40,20]:_ref2$cellSize,_ref2$cellPadding=_ref2.cellPadding,cellPadding=void 0===_ref2$cellPadding?20:_ref2$cellPadding,cellStyle=_ref2.cellStyle,className=_ref2.className,style=_ref2.style,_ref2$setRole=_ref2.setRole,setRole=void 0===_ref2$setRole||_ref2$setRole,colorScale=(0,chsk_core_es.kE1)().scales.color;if(!(0,predicates.U5)(data))return null;if(!data)return null;var item="key"in data?String(data.key):"",symbolPosition=[r+padding[chsk_core_es.RLj],r+padding[chsk_core_es.GSB]],labelPosition=[symbolPosition[chsk_core_es.X]+r+labelDistance,symbolPosition[chsk_core_es.Y]],itemStyle=function getSymbolStyle(style,color,colorScale,item){var itemColor="number"==typeof color?colorScale(color):null!=color?color:colorScale(colorScale.domain().indexOf(null!=item?item:""));return(0,chsk_core_es.hIX)(style,itemColor)}(symbolStyle,color,colorScale,item),symbolClassName=(0,chsk_core_es.gjB)("tooltipSymbol right",className),textClassName=(0,chsk_core_es.gjB)("tooltipItem right",className),infoClassName=(0,chsk_core_es.gjB)("tooltipItem",className),infoPosition=[padding[chsk_core_es.RLj],Math.max(padding[chsk_core_es.GSB]+1.5*cellSize[chsk_core_es.Y],2*labelPosition[chsk_core_es.Y])],content1=(0,jsx_runtime.jsx)(InformationTable,{position:infoPosition,size:cellSize,labels:["n","mean","stdev","min","max"],values:[data.n,data.moments?valueFormat(data.moments[0]):void 0,data.moments&&isFinite(data.moments[1])?valueFormat(Math.sqrt(data.moments[1])):void 0,valueFormat(data.extrema[0]),valueFormat(data.extrema[1])],className:infoClassName,style:cellStyle},"info-n-mean"),content2=(0,jsx_runtime.jsx)(InformationTable,{position:[infoPosition[chsk_core_es.X]+2*cellSize[chsk_core_es.X]+cellPadding,infoPosition[chsk_core_es.Y]],size:cellSize,labels:data.quantiles.map((function(q){return String(100*q)+"%"})),values:data.values.map((function(v){return valueFormat(v)})),className:infoClassName},"info-q");return(0,jsx_runtime.jsxs)("g",{role:setRole?"tooltip-item":void 0,transform:(0,chsk_core_es.R6R)(position),style,className:"tooltipItem",children:[(0,react.createElement)(symbol,{key:"symbol-"+item,cx:symbolPosition[chsk_core_es.X],cy:symbolPosition[chsk_core_es.Y],r,className:symbolClassName,style:itemStyle,setRole:!1}),(0,jsx_runtime.jsx)("text",{x:labelPosition[chsk_core_es.X],y:labelPosition[chsk_core_es.Y],className:textClassName,style:labelStyle,children:null!=label?label:item},"label"),content1,content2]},"item-"+item)};try{QuantileTooltipItem.displayName="QuantileTooltipItem",QuantileTooltipItem.__docgenInfo={description:"",displayName:"QuantileTooltipItem",props:{data:{defaultValue:null,description:"data",name:"data",required:!0,type:{name:"WithId & { key?: string | undefined; label?: string | undefined; color?: string | number | undefined; data?: unknown; } & { n: number; moments?: [number, number] | undefined; interval?: [...] | undefined; quantiles: FiveNumbers; values: FiveNumbers; extrema: [...]; }"}},label:{defaultValue:null,description:"string label next to color symbol",name:"label",required:!0,type:{name:"ReactNode"}},symbol:{defaultValue:null,description:"symbol function",name:"symbol",required:!1,type:{name:"FC<SymbolProps>"}},setRole:{defaultValue:{value:"true"},description:"toggle role attribute in svg code",name:"setRole",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"class string",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"css style",name:"style",required:!1,type:{name:"Partial<CSSProperties>"}},symbolStyle:{defaultValue:null,description:"style for symbol",name:"symbolStyle",required:!1,type:{name:"Partial<CSSProperties>"}},offset:{defaultValue:null,description:"offset/translation applied after anchoring, absolute units",name:"offset",required:!1,type:{name:"NumericPositionSpec"}},r:{defaultValue:{value:"defaultTooltipProps.r"},description:"size of symbol",name:"r",required:!1,type:{name:"number"}},position:{defaultValue:{value:"[0, 0]"},description:"position",name:"position",required:!1,type:{name:"NumericPositionSpec"}},children:{defaultValue:null,description:"children components",name:"children",required:!1,type:{name:"ReactNode"}},padding:{defaultValue:{value:"defaultTooltipItemProps.padding"},description:"padding (absolute values) *",name:"padding",required:!1,type:{name:"FourSideSizeSpec"}},color:{defaultValue:null,description:"color",name:"color",required:!1,type:{name:"string | number"}},item:{defaultValue:null,description:"key",name:"item",required:!0,type:{name:"string"}},symbolPosition:{defaultValue:null,description:"symbol position (overrides auto-calculation based on item index and legend variant)",name:"symbolPosition",required:!1,type:{name:"NumericPositionSpec"}},labelPosition:{defaultValue:null,description:"label position (overrides auto-calculation based on item index and legend variant)",name:"labelPosition",required:!1,type:{name:"NumericPositionSpec"}},labelStyle:{defaultValue:null,description:"style for text label",name:"labelStyle",required:!1,type:{name:"Partial<CSSProperties>"}},labelDistance:{defaultValue:{value:"defaultTooltipProps.labelDistance"},description:"distance from symbol to label",name:"labelDistance",required:!1,type:{name:"number"}},allowDisableAll:{defaultValue:null,description:"allow disabling the last active key",name:"allowDisableAll",required:!1,type:{name:"boolean"}},cellSize:{defaultValue:{value:"[40, 20]"},description:"size of each cell in information table",name:"cellSize",required:!1,type:{name:"SizeSpec"}},valueFormat:{defaultValue:{value:"(x: number) => String(x)"},description:"format for quantile values",name:"valueFormat",required:!1,type:{name:"((x: number) => string | number)"}},cellPadding:{defaultValue:{value:"20"},description:"padding between columns in information table",name:"cellPadding",required:!1,type:{name:"number"}},cellStyle:{defaultValue:null,description:"style for cells in information table",name:"cellStyle",required:!1,type:{name:"Partial<CSSProperties>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/src/quantiles/QuantileTooltipItem.tsx#QuantileTooltipItem"]={docgenInfo:QuantileTooltipItem.__docgenInfo,name:"QuantileTooltipItem",path:"packages/band/src/quantiles/QuantileTooltipItem.tsx#QuantileTooltipItem"})}catch(__react_docgen_typescript_loader_error){}var QuantileTooltip=function QuantileTooltip(_ref){var _tooltip$data,_title,_size,_ref$offset=_ref.offset,offset=void 0===_ref$offset?chsk_core_es.WWF.offset:_ref$offset,size=_ref.size,_ref$anchor=_ref.anchor,anchor=void 0===_ref$anchor?chsk_core_es.WWF.anchor:_ref$anchor,_ref$padding=_ref.padding,padding=void 0===_ref$padding?chsk_core_es.WWF.padding:_ref$padding,_ref$rx=_ref.rx,rx=void 0===_ref$rx?chsk_core_es.WWF.rx:_ref$rx,_ref$ry=_ref.ry,ry=void 0===_ref$ry?chsk_core_es.WWF.ry:_ref$ry,_ref$maxOverhang=_ref.maxOverhang,maxOverhang=void 0===_ref$maxOverhang?chsk_core_es.WWF.maxOverhang:_ref$maxOverhang,_ref$itemSize=_ref.itemSize,itemSize=void 0===_ref$itemSize?chsk_core_es.WWF.itemSize:_ref$itemSize,_ref$itemPadding=_ref.itemPadding,itemPadding=void 0===_ref$itemPadding?chsk_core_es.WWF.itemPadding:_ref$itemPadding,_ref$firstOffset=_ref.firstOffset,firstOffset=void 0===_ref$firstOffset?chsk_core_es.WWF.firstOffset:_ref$firstOffset,title=_ref.title,titleStyle=_ref.titleStyle,titleFormat=_ref.titleFormat,_ref$r=_ref.r,r=void 0===_ref$r?chsk_core_es.WWF.r:_ref$r,_ref$symbol=_ref.symbol,symbol=void 0===_ref$symbol?chsk_core_es.bK0:_ref$symbol,symbolStyle=_ref.symbolStyle,labelStyle=_ref.labelStyle,_ref$labelDistance=_ref.labelDistance,labelDistance=void 0===_ref$labelDistance?chsk_core_es.WWF.labelDistance:_ref$labelDistance,labelFormat=_ref.labelFormat,_ref$valueFormat=_ref.valueFormat,valueFormat=void 0===_ref$valueFormat?function(x){return String(x)}:_ref$valueFormat,_ref$cellSize=_ref.cellSize,cellSize=void 0===_ref$cellSize?[40,20]:_ref$cellSize,_ref$cellPadding=_ref.cellPadding,cellPadding=void 0===_ref$cellPadding?20:_ref$cellPadding,cellStyle=_ref.cellStyle,className=_ref.className,style=_ref.style,_ref$setRole=_ref.setRole,setRole=void 0===_ref$setRole||_ref$setRole,tooltip=(0,chsk_core_es.lLG)().data,tooltipData=null!=(_tooltip$data=null==tooltip?void 0:tooltip.data)?_tooltip$data:[];if(!tooltipData.every((function(data){return(0,predicates.U5)(data)})))return null;title=null!=(_title=title)?_title:null===titleFormat?"":titleFormat?titleFormat(tooltip):tooltip.title;var n=tooltipData.length,infoSize=[4*cellSize[chsk_core_es.X]+cellPadding,5*cellSize[chsk_core_es.Y]];size=null!=(_size=size)?_size:[Math.max(itemSize[chsk_core_es.X],infoSize[chsk_core_es.X])+padding[chsk_core_es.RLj]+padding[chsk_core_es.pXp],itemSize[chsk_core_es.Y]*n+(title?itemSize[chsk_core_es.Y]:0)+infoSize[chsk_core_es.Y]*n+padding[chsk_core_es.GSB]+padding[chsk_core_es.DaS]];var titlePosition=[padding[chsk_core_es.RLj],padding[chsk_core_es.GSB]],itemsPosition=[padding[chsk_core_es.RLj],padding[chsk_core_es.GSB]],step=[0,itemSize[chsk_core_es.Y]];title&&(itemsPosition[0]+=step[0]+firstOffset[0],itemsPosition[1]+=step[1]+firstOffset[1]);var infoPositions=Array(n).fill(0).map((function(_,i){return[padding[chsk_core_es.RLj],itemsPosition[chsk_core_es.Y]+(itemSize[chsk_core_es.Y]+infoSize[chsk_core_es.Y])*i]})),content=tooltipData.map((function(data,i){var _data$key,_labelFormat,_data$key2,fallbackLabel=null!=(_data$key=data.key)?_data$key:"";return(0,jsx_runtime.jsx)(QuantileTooltipItem,{position:infoPositions[i],data,label:labelFormat&&null!=(_labelFormat=labelFormat(data))?_labelFormat:fallbackLabel,labelDistance,item:null!=(_data$key2=data.key)?_data$key2:"",padding:itemPadding,symbol,symbolStyle,labelStyle,className,valueFormat,cellPadding,cellSize,cellStyle},"item-"+i)}));return(0,jsx_runtime.jsxs)(chsk_core_es.ua7,{offset,size,padding,anchor,rx,ry,maxOverhang,style,setRole,children:[(0,jsx_runtime.jsx)(chsk_core_es.CKu,{variant:"right",position:titlePosition,size:itemSize,padding:itemPadding,offset:[0,r],style:titleStyle,className,children:title},"title"),content]})};try{QuantileTooltip.displayName="QuantileTooltip",QuantileTooltip.__docgenInfo={description:"",displayName:"QuantileTooltip",props:{valueFormat:{defaultValue:{value:"(x: number) => String(x)"},description:"format for quantile values",name:"valueFormat",required:!1,type:{name:"((x: number) => string | number)"}},cellSize:{defaultValue:{value:"[40, 20]"},description:"size of each cell in information table",name:"cellSize",required:!1,type:{name:"SizeSpec"}},cellPadding:{defaultValue:{value:"20"},description:"padding between columns in information table",name:"cellPadding",required:!1,type:{name:"number"}},cellStyle:{defaultValue:null,description:"style for cells in information table",name:"cellStyle",required:!1,type:{name:"Partial<CSSProperties>"}},symbol:{defaultValue:null,description:"symbol function",name:"symbol",required:!1,type:{name:"FC<SymbolProps>"}},setRole:{defaultValue:{value:"true"},description:"toggle role attribute in svg code",name:"setRole",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"class string",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"css style",name:"style",required:!1,type:{name:"Partial<CSSProperties>"}},symbolStyle:{defaultValue:null,description:"style for symbol",name:"symbolStyle",required:!1,type:{name:"Partial<CSSProperties>"}},offset:{defaultValue:{value:"defaultTooltipProps.offset"},description:"offset/translation applied after anchoring, absolute units",name:"offset",required:!1,type:{name:"NumericPositionSpec"}},anchor:{defaultValue:{value:"defaultTooltipProps.anchor"},description:"container anchor point",name:"anchor",required:!1,type:{name:"AnchorSpec"}},r:{defaultValue:{value:"defaultTooltipProps.r"},description:"size of symbol",name:"r",required:!1,type:{name:"number"}},size:{defaultValue:null,description:"size",name:"size",required:!1,type:{name:"NumericPositionSpec"}},padding:{defaultValue:{value:"defaultTooltipProps.padding"},description:"padding (absolute values) *",name:"padding",required:!1,type:{name:"FourSideSizeSpec"}},rx:{defaultValue:{value:"defaultTooltipProps.rx"},description:"horizontal corner radius",name:"rx",required:!1,type:{name:"number"}},ry:{defaultValue:{value:"defaultTooltipProps.ry"},description:"vertical corner radius",name:"ry",required:!1,type:{name:"number"}},itemSize:{defaultValue:{value:"defaultTooltipProps.itemSize"},description:"size of a single item",name:"itemSize",required:!1,type:{name:"SizeSpec"}},itemPadding:{defaultValue:{value:"defaultTooltipProps.itemPadding"},description:"padding for a single item",name:"itemPadding",required:!1,type:{name:"FourSideSizeSpec"}},itemStyle:{defaultValue:null,description:"style for list items",name:"itemStyle",required:!1,type:{name:"Partial<CSSProperties>"}},itemAlign:{defaultValue:null,description:"alignment within the item bounding box",name:"itemAlign",required:!1,type:{name:"AlignSpec"}},title:{defaultValue:null,description:"list title",name:"title",required:!1,type:{name:"ReactNode"}},labelStyle:{defaultValue:null,description:"style for text label",name:"labelStyle",required:!1,type:{name:"Partial<CSSProperties>"}},labelDistance:{defaultValue:{value:"defaultTooltipProps.labelDistance"},description:"distance from symbol to label",name:"labelDistance",required:!1,type:{name:"number"}},titleStyle:{defaultValue:null,description:"style for list title",name:"titleStyle",required:!1,type:{name:"Partial<CSSProperties>"}},firstOffset:{defaultValue:{value:"defaultTooltipProps.firstOffset"},description:"offset/translate first non-title item relative to default position",name:"firstOffset",required:!1,type:{name:"NumericPositionSpec"}},titleFormat:{defaultValue:null,description:"construction of title",name:"titleFormat",required:!1,type:{name:"((d: TooltipData) => ReactNode) | null"}},labelFormat:{defaultValue:null,description:"construction of label",name:"labelFormat",required:!1,type:{name:"((d: TooltipDataItem) => ReactNode) | null"}},maxOverhang:{defaultValue:{value:"defaultTooltipProps.maxOverhang"},description:"extent tooltip can exit its reference region",name:"maxOverhang",required:!1,type:{name:"FourSideSizeSpec"}},color:{defaultValue:null,description:"color",name:"color",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/src/quantiles/QuantileTooltip.tsx#QuantileTooltip"]={docgenInfo:QuantileTooltip.__docgenInfo,name:"QuantileTooltip",path:"packages/band/src/quantiles/QuantileTooltip.tsx#QuantileTooltip"})}catch(__react_docgen_typescript_loader_error){}var decorators=__webpack_require__("./packages/band/stories/quantiles/decorators.tsx");const QuantileTooltip_stories={title:"Addons/Band/Quantiles/QuantileTooltip",component:QuantileTooltip},Tooltip={name:"tooltip",args:{offset:[8,0],padding:[8,8,8,8],anchor:[0,.5],labelFormat:d=>d.id+" - "+d.key,labelStyle:{fontWeight:600},valueFormat:x=>Math.round(100*x)/100,cellStyle:{textAnchor:"start",dominantBaseline:"central"}},decorators:[decorators.Bz]},TableFormat={name:"table format",args:{offset:[8,0],padding:[8,8,8,8],anchor:[.5,1],cellSize:[60,20],cellPadding:50,labelFormat:d=>d.id+" - "+d.key,labelStyle:{fontWeight:600},valueFormat:x=>Math.round(100*x)/100,cellStyle:{textAnchor:"start",dominantBaseline:"central"}},decorators:[decorators.Bz]},__namedExportsOrder=["Tooltip","TableFormat"];Tooltip.parameters={...Tooltip.parameters,docs:{...Tooltip.parameters?.docs,source:{originalSource:"{\n  name: 'tooltip',\n  args: {\n    offset: [8, 0],\n    padding: [8, 8, 8, 8],\n    anchor: [0, 0.5],\n    labelFormat: (d: TooltipDataItem) => d.id + ' - ' + d.key,\n    labelStyle: {\n      fontWeight: 600\n    },\n    valueFormat: (x: number) => Math.round(x * 100) / 100,\n    cellStyle: {\n      textAnchor: 'start',\n      dominantBaseline: 'central'\n    }\n  },\n  decorators: [ChartQuantileWithTooltipDecorator]\n}",...Tooltip.parameters?.docs?.source}}},TableFormat.parameters={...TableFormat.parameters,docs:{...TableFormat.parameters?.docs,source:{originalSource:"{\n  name: 'table format',\n  args: {\n    offset: [8, 0],\n    padding: [8, 8, 8, 8],\n    anchor: [0.5, 1],\n    cellSize: [60, 20],\n    cellPadding: 50,\n    labelFormat: (d: TooltipDataItem) => d.id + ' - ' + d.key,\n    labelStyle: {\n      fontWeight: 600\n    },\n    valueFormat: (x: number) => Math.round(x * 100) / 100,\n    cellStyle: {\n      textAnchor: 'start',\n      dominantBaseline: 'central'\n    }\n  },\n  decorators: [ChartQuantileWithTooltipDecorator]\n}",...TableFormat.parameters?.docs?.source}}}}}]);