"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[4798],{"./examples/histograms/histograms.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Annotations:()=>Annotations,Controls:()=>Controls,ManyDistributions:()=>ManyDistributions,MouseInteractions:()=>MouseInteractions,MultipleViews:()=>MultipleViews,__namedExportsOrder:()=>__namedExportsOrder,default:()=>histograms_stories});var gallery=__webpack_require__("./examples/gallery.tsx"),chsk_core_es=__webpack_require__("./packages/core/dist/chsk-core.es.js"),chsk_xy_es=__webpack_require__("./packages/xy/dist/chsk-xy.es.js"),chsk_annotation_es=__webpack_require__("./packages/annotation/dist/chsk-annotation.es.js"),utils=__webpack_require__("./examples/utils.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var customHistogramTheme={line:{intervalLabel:{stroke:"#222255"}},path:{default:{fillOpacity:0},histogramCurve:{strokeWidth:2},histogramArea:{fillOpacity:.2}},text:{axisLabel:{textAnchor:"middle",dominantBaseline:"auto"},lineLabel:{textAnchor:"middle",fontWeight:400,fill:"#222255"}}},customHistogramProps={breaks:(0,utils.WJ)([-3,7],.2),scaleX:{variant:"linear",domain:[-3,7]},scaleY:{variant:"linear",domain:[0,"auto"]}},LineHistogramChart=function LineHistogramChart(_ref){var fref=_ref.fref,chartData=_ref.chartData,rawData=_ref.rawData;return(0,chsk_xy_es.nr)(rawData)?(0,jsx_runtime.jsx)(chsk_core_es.t1X,{id:"lineHistogram",fref,data:chartData,size:[600,320],padding:[60,40,60,60],theme:customHistogramTheme,children:(0,jsx_runtime.jsxs)(chsk_xy_es.dq,_extends({},customHistogramProps,{data:rawData,children:[(0,jsx_runtime.jsxs)(chsk_core_es.XAM,{enterOn:"axes",children:[(0,jsx_runtime.jsx)(chsk_core_es.K2c,{variant:"y"}),(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"left",label:"counts"}),(0,jsx_runtime.jsxs)(chsk_core_es._0v,{variant:"bottom",children:[(0,jsx_runtime.jsx)(chsk_core_es.wYM,{style:{strokeWidth:1}}),(0,jsx_runtime.jsx)(chsk_core_es.wwq,{ticks:8}),(0,jsx_runtime.jsx)(chsk_core_es.aPH,{children:"values (a.u.)"})]})]}),(0,jsx_runtime.jsxs)(chsk_core_es.XAM,{enterOn:"data",children:[(0,jsx_runtime.jsx)(chsk_xy_es.u2,{ids:["custom"],curve:"Step"}),(0,jsx_runtime.jsx)(chsk_xy_es.oR,{ids:["custom"],curve:"Step"})]}),(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enterOn:"primary-label",children:(0,jsx_runtime.jsx)(chsk_annotation_es.dN,{start:[-2,-.05],end:[2,-.05],units:["view","relative"],align:.5,children:"Primary population"})}),(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enterOn:"secondary-label",children:(0,jsx_runtime.jsx)(chsk_annotation_es.dN,{start:[3.4,15],end:[5.6,15],units:"view",children:"Secondary population"})})]}))}):null};try{LineHistogramChart.displayName="LineHistogramChart",LineHistogramChart.__docgenInfo={description:"",displayName:"LineHistogramChart",props:{chartData:{defaultValue:null,description:"data object passed to the 'Chart' component",name:"chartData",required:!0,type:{name:'Omit<ChartDataContextProps, "id">'}},fref:{defaultValue:null,description:"ref used to toggle milestones",name:"fref",required:!1,type:{name:"Ref<ChartRef>"}},rawData:{defaultValue:null,description:"raw dataset used for plotting",name:"rawData",required:!0,type:{name:"RawData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/histograms/LineHistogramChart.tsx#LineHistogramChart"]={docgenInfo:LineHistogramChart.__docgenInfo,name:"LineHistogramChart",path:"examples/histograms/LineHistogramChart.tsx#LineHistogramChart"})}catch(__react_docgen_typescript_loader_error){}var navigation=__webpack_require__("./examples/navigation.tsx"),chsk_themes_es=__webpack_require__("./packages/themes/dist/chsk-themes.es.js");function ManyLinesHistogramChart_extends(){return ManyLinesHistogramChart_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ManyLinesHistogramChart_extends.apply(null,arguments)}var ids=utils.o6.slice(0,4),customTheme=(0,chsk_core_es.MJ3)(chsk_themes_es.mr,{line:{axis:{strokeWidth:1},legendSymbol:{strokeWidth:3}},path:{histogramCurve:{strokeWidth:3,pointerEvents:"stroke"},default:{fillOpacity:0}},rect:{"tooltip.surface":{strokeWidth:1,stroke:"#555555"}}}),histogramProps={breaks:(0,utils.WJ)([0,12],.4),scaleX:{variant:"linear",domain:[0,12]},scaleY:{variant:"linear",domain:[0,"auto"]}},customTooltipLabel=function customTooltipLabel(x){var _xh$mean,_xh$sd,xh=x;return x.id+", "+(0,utils.Xo)(null!=(_xh$mean=xh.mean)?_xh$mean:0)+" Â± "+(0,utils.Xo)(null!=(_xh$sd=xh.sd)?_xh$sd:0)+" (n = "+xh.n+")"},ManyLinesHistogramChart=function ManyLinesHistogramChart(_ref){var fref=_ref.fref,chartData=_ref.chartData,rawData=_ref.rawData;return(0,chsk_xy_es.nr)(rawData)?(0,jsx_runtime.jsx)(chsk_core_es.t1X,{id:"many-histograms",fref,data:chartData,size:[480,380],padding:[80,40,60,70],theme:customTheme,children:(0,jsx_runtime.jsxs)(chsk_xy_es.dq,ManyLinesHistogramChart_extends({},histogramProps,{data:rawData,variant:"density",children:[(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"title",position:[-55,-50],children:"Many distributions"}),(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"subtitle",position:[-55,-30],children:"Distributions where variance decreases with mean"}),(0,jsx_runtime.jsx)(navigation.u,{position:[310,-50],data:!0,image:!0}),(0,jsx_runtime.jsxs)(chsk_core_es.XAM,{enterOn:"axes",children:[(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"left",label:"density"}),(0,jsx_runtime.jsxs)(chsk_core_es._0v,{variant:"bottom",children:[(0,jsx_runtime.jsx)(chsk_core_es.wYM,{style:{strokeWidth:1}}),(0,jsx_runtime.jsx)(chsk_core_es.wwq,{ticks:8}),(0,jsx_runtime.jsx)(chsk_core_es.aPH,{children:"values (a.u.)"})]})]}),(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enterOn:"legend",children:(0,jsx_runtime.jsx)(chsk_core_es.s$2,{offset:[8,0],position:[0,0],positionUnits:"relative",horizontal:!1,r:8,itemSize:[100,20],itemPadding:[2,2,2,2],firstOffset:[-85,24],symbol:chsk_annotation_es.Y4})}),(0,jsx_runtime.jsxs)(chsk_core_es.XAM,{enterOn:"data",children:[(0,jsx_runtime.jsx)(chsk_xy_es.oR,{curve:"Step",dataComponent:chsk_core_es.X2C}),(0,jsx_runtime.jsx)(chsk_core_es.m_M,{itemSize:[200,24],labelFormat:customTooltipLabel})]})]}))}):null};try{ManyLinesHistogramChart.displayName="ManyLinesHistogramChart",ManyLinesHistogramChart.__docgenInfo={description:"",displayName:"ManyLinesHistogramChart",props:{chartData:{defaultValue:null,description:"data object passed to the 'Chart' component",name:"chartData",required:!0,type:{name:'Omit<ChartDataContextProps, "id">'}},fref:{defaultValue:null,description:"ref used to toggle milestones",name:"fref",required:!1,type:{name:"Ref<ChartRef>"}},rawData:{defaultValue:null,description:"raw dataset used for plotting",name:"rawData",required:!0,type:{name:"RawData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/histograms/ManyLinesHistogramChart.tsx#ManyLinesHistogramChart"]={docgenInfo:ManyLinesHistogramChart.__docgenInfo,name:"ManyLinesHistogramChart",path:"examples/histograms/ManyLinesHistogramChart.tsx#ManyLinesHistogramChart"})}catch(__react_docgen_typescript_loader_error){}var react=__webpack_require__("./node_modules/react/index.js");function OverlappingHistogramChart_extends(){return OverlappingHistogramChart_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OverlappingHistogramChart_extends.apply(null,arguments)}var OverlappingHistogramChart_customHistogramTheme={line:{intervalLabel:{strokeWidth:1,stroke:"#222255"}},path:{default:{fillOpacity:0},histogramCurve:{strokeWidth:2,pointerEvents:"none"},histogramArea:{cursor:"pointer",fillOpacity:.2},"histogramArea:hover":{fillOpacity:.4}},rect:{histogramBar:{fillOpacity:.2,cursor:"pointer"},"histogramBar:hover":{fillOpacity:.4}},text:{axisLabel:{textAnchor:"middle",dominantBaseline:"auto"}}},OverlappingHistogramChart_customHistogramProps={breaks:(0,utils.WJ)([-3,7.2],.5),scaleX:{variant:"linear",domain:[-3,7]},scaleY:{variant:"linear",domain:[0,"auto"]}},ClickSummary=function ClickSummary(_ref){var _data$points$data$bin,data=_ref.data,labelStyle={fontWeight:600,color:"#444444",minWidth:"4rem",display:"inline-block"},breaks=data.breaks,domain=data.bin?"["+breaks[data.bin-1]+", "+breaks[data.bin]+"]":null,value=data.bin?null==(_data$points$data$bin=data.points[data.bin])?void 0:_data$points$data$bin[1]:null;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:labelStyle,children:"series:"}),data.id]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:labelStyle,children:"bin:"}),data.bin]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:labelStyle,children:"domain:"}),domain]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:labelStyle,children:"value:"}),value]})]})},OverlappingHistogramChart=function OverlappingHistogramChart(_ref2){var fref=_ref2.fref,chartData=_ref2.chartData,rawData=_ref2.rawData;if(!(0,chsk_xy_es.nr)(rawData))return null;var _useState=(0,react.useState)(null),clicked=_useState[0],setClicked=_useState[1];return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(chsk_core_es.t1X,{id:"overlapping",fref,data:chartData,size:[600,340],padding:[60,60,60,60],theme:OverlappingHistogramChart_customHistogramTheme,children:(0,jsx_runtime.jsxs)(chsk_xy_es.dq,OverlappingHistogramChart_extends({},OverlappingHistogramChart_customHistogramProps,{data:rawData,children:[(0,jsx_runtime.jsx)(chsk_core_es.K2c,{variant:"y"}),(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"left",label:"counts"}),(0,jsx_runtime.jsxs)(chsk_core_es._0v,{variant:"bottom",children:[(0,jsx_runtime.jsx)(chsk_core_es.wYM,{style:{strokeWidth:1}}),(0,jsx_runtime.jsx)(chsk_core_es.wwq,{ticks:8}),(0,jsx_runtime.jsx)(chsk_core_es.aPH,{children:"values (a.u.)"})]}),(0,jsx_runtime.jsx)(chsk_xy_es.u2,{ids:["A"],curve:"Step",handlers:{onClick:function onClickArea(data){setClicked(null!=data?data:null)}}}),(0,jsx_runtime.jsx)(chsk_xy_es.oR,{ids:["A"],curve:"Step"}),(0,jsx_runtime.jsx)(chsk_xy_es.l$,{ids:["B"],handlers:{onClick:function onClickBars(data){setClicked(null!=data?data:null)}}}),(0,jsx_runtime.jsx)(chsk_xy_es.oR,{ids:["B"],curve:"Step"}),(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"title",position:[-55,-40],children:"Clickable histograms"}),(0,jsx_runtime.jsx)(chsk_core_es.s$2,{position:[510,-36],size:[140,20],sizeUnits:"absolute",horizontal:!0,anchor:[1,1],padding:[0,0,0,0],r:9,itemSize:[70,20],itemPadding:[2,2,2,2]})]}))}),(0,jsx_runtime.jsxs)("div",{style:{margin:"1em",padding:"1em",border:"solid 1px #bbbbbb",background:"#f8f8f8",minHeight:"3rem"},children:[(0,jsx_runtime.jsx)("div",{style:{fontWeight:600,color:"#444444",marginBottom:"0.75rem"},children:"This is an html div element. It responds to click events."}),clicked?(0,jsx_runtime.jsx)(ClickSummary,{data:clicked}):null]})]})};try{OverlappingHistogramChart.displayName="OverlappingHistogramChart",OverlappingHistogramChart.__docgenInfo={description:"",displayName:"OverlappingHistogramChart",props:{chartData:{defaultValue:null,description:"data object passed to the 'Chart' component",name:"chartData",required:!0,type:{name:'Omit<ChartDataContextProps, "id">'}},fref:{defaultValue:null,description:"ref used to toggle milestones",name:"fref",required:!1,type:{name:"Ref<ChartRef>"}},rawData:{defaultValue:null,description:"raw dataset used for plotting",name:"rawData",required:!0,type:{name:"RawData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/histograms/OverlappingHistogramChart.tsx#OverlappingHistogramChart"]={docgenInfo:OverlappingHistogramChart.__docgenInfo,name:"OverlappingHistogramChart",path:"examples/histograms/OverlappingHistogramChart.tsx#OverlappingHistogramChart"})}catch(__react_docgen_typescript_loader_error){}function MultipleViewsHistogramChart_extends(){return MultipleViewsHistogramChart_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},MultipleViewsHistogramChart_extends.apply(null,arguments)}var multiviewTheme={line:{axis:{visibility:"visible",strokeWidth:1}},path:{default:{fillOpacity:0},histogramCurve:{strokeWidth:3}},rect:{inner:{fill:"#ffffff00",stroke:"#222222",strokeWidth:1},boxedLabel:{fill:"#f6f6f6",stroke:"#222222",strokeWidth:1}},text:{axisLabel:{textAnchor:"middle",dominantBaseline:"auto"},title:{fontWeight:400}}},multiviewHistogramProps={variant:"density",breaks:(0,utils.WJ)([-3,4],.4),scaleX:{variant:"linear",domain:[-3,4]},scaleY:{variant:"linear",domain:[0,.55]}},AppearingLabel=function AppearingLabel(_ref){var enterOn=_ref.enterOn,n=_ref.n;return(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enter:{opacity:1,scale:1.5},enterOn,enterTransition:{type:"spring",delay:.5,duration:1},children:(0,jsx_runtime.jsx)(chsk_annotation_es.rO,{position:[1,0],positionUnits:"relative",size:[60,24],sizeUnits:"absolute",anchor:[1,0],children:"n = "+n})})},MultipleViewsHistogramChart=function MultipleViewsHistogramChart(_ref2){var _rawData$,_rawData$2,_rawData$3,fref=_ref2.fref,chartData=_ref2.chartData,rawData=_ref2.rawData;return(0,chsk_xy_es.nr)(rawData)?(0,jsx_runtime.jsxs)(chsk_core_es.t1X,{data:chartData,fref,id:"multiview",size:[600,340],padding:[60,40,40,60],theme:multiviewTheme,children:[(0,jsx_runtime.jsxs)(chsk_core_es.xA9,{grid:[3,1],spacing:[6,0],children:[(0,jsx_runtime.jsx)(chsk_core_es.Ei_,{index:0,children:(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enterOn:"small",children:(0,jsx_runtime.jsxs)(chsk_xy_es.dq,MultipleViewsHistogramChart_extends({},multiviewHistogramProps,{data:rawData,children:[(0,jsx_runtime.jsx)(chsk_core_es.K2c,{variant:"y"}),(0,jsx_runtime.jsx)(chsk_core_es.uiQ,{}),(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"bottom"}),(0,jsx_runtime.jsx)(chsk_xy_es.oR,{ids:["small"]}),(0,jsx_runtime.jsxs)(chsk_core_es._0v,{variant:"left",children:[(0,jsx_runtime.jsx)(chsk_core_es.wwq,{tickSize:0}),(0,jsx_runtime.jsx)(chsk_core_es.aPH,{children:"probability density"})]}),(0,jsx_runtime.jsx)(AppearingLabel,{enterOn:"small",n:null==(_rawData$=rawData[0])?void 0:_rawData$.data.length})]}))})}),(0,jsx_runtime.jsx)(chsk_core_es.Ei_,{index:1,children:(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enterOn:"medium",children:(0,jsx_runtime.jsxs)(chsk_xy_es.dq,MultipleViewsHistogramChart_extends({},multiviewHistogramProps,{data:rawData,children:[(0,jsx_runtime.jsx)(chsk_core_es.K2c,{variant:"y"}),(0,jsx_runtime.jsx)(chsk_core_es.uiQ,{}),(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"bottom",label:"values (a.u.)"}),(0,jsx_runtime.jsx)(chsk_xy_es.oR,{ids:["medium"]}),(0,jsx_runtime.jsx)(AppearingLabel,{enterOn:"medium",n:null==(_rawData$2=rawData[1])?void 0:_rawData$2.data.length})]}))})}),(0,jsx_runtime.jsx)(chsk_core_es.Ei_,{index:2,children:(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enterOn:"large",children:(0,jsx_runtime.jsxs)(chsk_xy_es.dq,MultipleViewsHistogramChart_extends({},multiviewHistogramProps,{data:rawData,children:[(0,jsx_runtime.jsx)(chsk_core_es.K2c,{variant:"y"}),(0,jsx_runtime.jsx)(chsk_core_es.uiQ,{}),(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"bottom"}),(0,jsx_runtime.jsx)(chsk_xy_es.oR,{ids:["large"]}),(0,jsx_runtime.jsx)(AppearingLabel,{enterOn:"large",n:null==(_rawData$3=rawData[2])?void 0:_rawData$3.data.length})]}))})})]}),(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"title",position:[0,-40],children:"Three measurements of the same distribution"}),(0,jsx_runtime.jsx)(chsk_core_es.XAM,{enterOn:"subtitle",children:(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"subtitle",position:[0,-20],children:"Measurements involve sampling n points from a distribution"})})]}):null};try{MultipleViewsHistogramChart.displayName="MultipleViewsHistogramChart",MultipleViewsHistogramChart.__docgenInfo={description:"",displayName:"MultipleViewsHistogramChart",props:{chartData:{defaultValue:null,description:"data object passed to the 'Chart' component",name:"chartData",required:!0,type:{name:'Omit<ChartDataContextProps, "id">'}},fref:{defaultValue:null,description:"ref used to toggle milestones",name:"fref",required:!1,type:{name:"Ref<ChartRef>"}},rawData:{defaultValue:null,description:"raw dataset used for plotting",name:"rawData",required:!0,type:{name:"RawData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/histograms/MultipleViewsHistogramChart.tsx#MultipleViewsHistogramChart"]={docgenInfo:MultipleViewsHistogramChart.__docgenInfo,name:"MultipleViewsHistogramChart",path:"examples/histograms/MultipleViewsHistogramChart.tsx#MultipleViewsHistogramChart"})}catch(__react_docgen_typescript_loader_error){}var HistogramScatterChart_customTheme=(0,chsk_core_es.MJ3)(chsk_themes_es.mr,{g:{"draggable:hover":{cursor:"ew-resize"}},line:{regression:{strokeWidth:3},"regression.pooled":{strokeDasharray:6,stroke:"#444444"},"regression.outside":{strokeWidth:2,opacity:.7},"regression.inside":{strokeWidth:4},threshold:{stroke:"#222222",strokeWidth:1},thresholdBg:{opacity:0,strokeWidth:12}},rect:{domain:{fill:"#3f9cde",fillOpacity:.15},surface:{strokeWidth:1,stroke:"#444444",fill:"#ffffff"},controls:{fill:"#fafafa"}}}),DraggableThreshold=function DraggableThreshold(_ref){var value=_ref.value,onDrag=_ref.onDrag,size=(0,chsk_core_es.XlF)().size;return void 0===value?null:(0,jsx_runtime.jsxs)(chsk_core_es.sxc,{variant:"x",position:[value,0],positionUnits:["view","absolute"],onDrag,children:[(0,jsx_runtime.jsx)("line",{x1:0,y1:0,x2:0,y2:size[chsk_core_es.Y],className:"thresholdBg"}),(0,jsx_runtime.jsx)("line",{x1:0,y1:0,x2:0,y2:size[chsk_core_es.Y],className:"threshold"})]})},HistogramScatterChart=function HistogramScatterChart(_ref2){var _rawData$,fref=_ref2.fref,chartData=_ref2.chartData,rawData=_ref2.rawData;if(!(0,chsk_xy_es.HZ)(rawData))return null;var _useState=(0,react.useState)(void 0),lower=_useState[0],setLower=_useState[1],_useState2=(0,react.useState)(void 0),upper=_useState2[0],setUpper=_useState2[1],_useState3=(0,react.useState)(0),instance=_useState3[0],setInstance=_useState3[1],histogramData=rawData.map((function(seriesData){var values=seriesData.data.map((function(d){return Number(d.x)}));return{id:seriesData.id,data:values}})),scatterData=function stratifyByX(data,lower,upper){var inside=[],outside=[];return data.forEach((function(d){var x=Number(d.x);x<lower||x>upper?outside.push(d):inside.push(d)})),[{id:"inside",data:inside},{id:"outside",data:outside}]}(null==(_rawData$=rawData[0])?void 0:_rawData$.data,Number(lower),Number(upper));if((0,react.useEffect)((function(){var _histogramData$,_interval=(0,chsk_core_es.YPD)(null==(_histogramData$=histogramData[0])?void 0:_histogramData$.data),min=_interval[0],max=_interval[1];setLower(min),setUpper(max),setInstance((function(instance){return instance+1}))}),[rawData]),!(0,chsk_xy_es.nr)(histogramData))return null;if(!(0,chsk_xy_es.HZ)(scatterData))return null;return(0,jsx_runtime.jsxs)(chsk_core_es.t1X,{data:chartData,fref,id:"histogram-scatter",size:[600,480],padding:[50,40,60,60],theme:HistogramScatterChart_customTheme,children:[(0,jsx_runtime.jsxs)(chsk_core_es.xA9,{grid:[1,2],spacing:[0,6],heights:[.12,.88],children:[(0,jsx_runtime.jsx)(chsk_core_es.Ei_,{index:0,children:(0,jsx_runtime.jsxs)(chsk_xy_es.dq,{data:histogramData,breaks:20,variant:"density",children:[(0,jsx_runtime.jsx)(chsk_core_es.uiQ,{className:"controls",expansion:[0,6,0,6]}),(0,jsx_runtime.jsx)(chsk_xy_es.oR,{style:{stroke:"#222222",strokeWidth:2}}),(0,jsx_runtime.jsx)(chsk_annotation_es.or,{variant:"x",domain:[null!=lower?lower:0,null!=upper?upper:0],domainUnits:"view",className:"domain"},"stripe"),(0,jsx_runtime.jsx)(DraggableThreshold,{value:lower,onDrag:function handleLower(data){setLower(data.view[0])}},"lower-threshold-"+instance),(0,jsx_runtime.jsx)(DraggableThreshold,{value:upper,onDrag:function handleUpper(data){setUpper(data.view[0])}},"upper-threshold-"+instance)]})}),(0,jsx_runtime.jsx)(chsk_core_es.Ei_,{index:1,children:(0,jsx_runtime.jsxs)(chsk_xy_es.Xl,{data:scatterData,x:"x",y:"y",k:"k",valueSize:2,children:[(0,jsx_runtime.jsx)(chsk_core_es.uiQ,{expansion:[6,6,6,6]}),(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"bottom",label:"x (a.u.)",distance:6}),(0,jsx_runtime.jsx)(chsk_core_es._0v,{variant:"left",label:"y (a.u.)",distance:6}),(0,jsx_runtime.jsx)(chsk_xy_es.eF,{}),(0,jsx_runtime.jsx)(chsk_xy_es.Wi,{variant:"pooled",className:"pooled"}),(0,jsx_runtime.jsx)(chsk_xy_es.Wi,{ids:["outside"],className:"outside"}),(0,jsx_runtime.jsx)(chsk_xy_es.Wi,{ids:["inside"],className:"inside"})]})})]}),(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"title",position:[0,-25],children:"Regression with custom domain"}),(0,jsx_runtime.jsx)(navigation.u,{position:[410,-25],data:!0,image:!0})]})};try{HistogramScatterChart.displayName="HistogramScatterChart",HistogramScatterChart.__docgenInfo={description:"",displayName:"HistogramScatterChart",props:{chartData:{defaultValue:null,description:"data object passed to the 'Chart' component",name:"chartData",required:!0,type:{name:'Omit<ChartDataContextProps, "id">'}},fref:{defaultValue:null,description:"ref used to toggle milestones",name:"fref",required:!1,type:{name:"Ref<ChartRef>"}},rawData:{defaultValue:null,description:"raw dataset used for plotting",name:"rawData",required:!0,type:{name:"RawData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/histograms/HistogramScatterChart.tsx#HistogramScatterChart"]={docgenInfo:HistogramScatterChart.__docgenInfo,name:"HistogramScatterChart",path:"examples/histograms/HistogramScatterChart.tsx#HistogramScatterChart"})}catch(__react_docgen_typescript_loader_error){}const histograms_stories={...gallery.I,title:"Gallery/Histograms"},Annotations={name:"annotations",args:{generator:function generateLineHistogramData(){return[{id:"custom",data:(0,utils.AE)([500,50,40],[0,0,4.5],[1,2,.5])}]},chart:LineHistogramChart,steps:["axes","data","primary-label","secondary-label"]}},ManyDistributions={name:"many distributions",args:{generator:function generateManyLinesHistogramData(){var means=(0,utils.p6)(4,5,9).sort((function(a,b){return a-b})),sds=(0,utils.p6)(4,.5,2.5).sort((function(a,b){return b-a})),positive=function positive(v){return v>0};return ids.map((function(id,index){return{id,data:(0,utils.AE)([1e3],[means[index]],[sds[index]]).filter(positive)}}))},chart:ManyLinesHistogramChart,steps:["axes","data","legend"]}},MouseInteractions={name:"mouse interactions",args:{generator:function generateOverlappingHistogramData(){return[{id:"A",data:(0,utils.AE)([340,50],[0,0],[1,2])},{id:"B",data:(0,utils.AE)([300,200],[2,2],[1.5,2.5])}]},chart:OverlappingHistogramChart,comment:(0,jsx_runtime.jsx)("div",{children:"Mouse interactions with entire histogram or with individual bins."})}},MultipleViews={name:"multiple views",args:{generator:function generateMultipleViewsHistogramData(){return[{id:"small",data:(0,utils.AE)([60,40],[0,1.2],[.8,1])},{id:"medium",data:(0,utils.AE)([360,240],[0,1.2],[.8,1])},{id:"large",data:(0,utils.AE)([2160,1440],[0,1.2],[.8,1])}]},chart:MultipleViewsHistogramChart,steps:["subtitle","small","medium","large"]}},Controls={name:"user controls",args:{generator:function generateHistogramScatterData(){var groupA=(0,utils.AE)([200],[0],[1]),noiseA=(0,utils.AE)([200],[0],[1]),groupB=(0,utils.AE)([50],[0],[2.5]),noiseB=(0,utils.AE)([50],[0],[1]),data=[];return groupA.forEach((function(x,i){data.push({k:data.length,x,y:1*x+Number(noiseA[i])})})),groupB.forEach((function(x,i){data.push({k:data.length,x,y:4*x+Number(noiseB[i])})})),[{id:"A",data}]},chart:HistogramScatterChart,comment:(0,jsx_runtime.jsx)("div",{children:"This dataset combines points from two distributions. Regressions lead to different slopes depending on inclusion criteria. Use the controls on the histogram to change the criteria."})}},__namedExportsOrder=["Annotations","ManyDistributions","MouseInteractions","MultipleViews","Controls"];Annotations.parameters={...Annotations.parameters,docs:{...Annotations.parameters?.docs,source:{originalSource:"{\n  name: 'annotations',\n  args: {\n    generator: generateLineHistogramData,\n    chart: LineHistogramChart,\n    steps: ['axes', 'data', 'primary-label', 'secondary-label']\n  }\n}",...Annotations.parameters?.docs?.source}}},ManyDistributions.parameters={...ManyDistributions.parameters,docs:{...ManyDistributions.parameters?.docs,source:{originalSource:"{\n  name: 'many distributions',\n  args: {\n    generator: generateManyLinesHistogramData,\n    chart: ManyLinesHistogramChart,\n    steps: ['axes', 'data', 'legend']\n  }\n}",...ManyDistributions.parameters?.docs?.source}}},MouseInteractions.parameters={...MouseInteractions.parameters,docs:{...MouseInteractions.parameters?.docs,source:{originalSource:"{\n  name: 'mouse interactions',\n  args: {\n    generator: generateOverlappingHistogramData,\n    chart: OverlappingHistogramChart,\n    comment: <div>Mouse interactions with entire histogram or with individual bins.</div>\n  }\n}",...MouseInteractions.parameters?.docs?.source}}},MultipleViews.parameters={...MultipleViews.parameters,docs:{...MultipleViews.parameters?.docs,source:{originalSource:"{\n  name: 'multiple views',\n  args: {\n    generator: generateMultipleViewsHistogramData,\n    chart: MultipleViewsHistogramChart,\n    steps: ['subtitle', 'small', 'medium', 'large']\n  }\n}",...MultipleViews.parameters?.docs?.source}}},Controls.parameters={...Controls.parameters,docs:{...Controls.parameters?.docs,source:{originalSource:"{\n  name: 'user controls',\n  args: {\n    generator: generateHistogramScatterData,\n    chart: HistogramScatterChart,\n    comment: <div>\n                This dataset combines points from two distributions. Regressions lead to different\n                slopes depending on inclusion criteria. Use the controls on the histogram to change\n                the criteria.\n            </div>\n  }\n}",...Controls.parameters?.docs?.source}}}},"./node_modules/d3-scale-chromatic/src/diverging/BrBG.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _colors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-scale-chromatic/src/colors.js"),_ramp_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3-scale-chromatic/src/ramp.js"),scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(_colors_js__WEBPACK_IMPORTED_MODULE_0__.A);const __WEBPACK_DEFAULT_EXPORT__=(0,_ramp_js__WEBPACK_IMPORTED_MODULE_1__.A)(scheme)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _colors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-scale-chromatic/src/colors.js"),_ramp_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3-scale-chromatic/src/ramp.js"),scheme=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(_colors_js__WEBPACK_IMPORTED_MODULE_0__.A);const __WEBPACK_DEFAULT_EXPORT__=(0,_ramp_js__WEBPACK_IMPORTED_MODULE_1__.A)(scheme)},"./node_modules/d3-shape/src/curve/bundle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _basis_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-shape/src/curve/basis.js");function Bundle(context,beta){this._basis=new _basis_js__WEBPACK_IMPORTED_MODULE_0__.xO(context),this._beta=beta}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};const __WEBPACK_DEFAULT_EXPORT__=function custom(beta){function bundle(context){return 1===beta?new _basis_js__WEBPACK_IMPORTED_MODULE_0__.xO(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85)}}]);