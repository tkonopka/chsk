import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'
import { BoxedLabel } from '../src'
import { ChartDecorator } from './decorators'

<Meta title="Addons/Annotation/BoxedLabel" />

# BoxedLabel

export const Template = args => <BoxedLabel {...args} />

`BoxedLabel` displays a text label enclosed in a rectangle.

<ArgsTable of={BoxedLabel} />

`BoxedLabel` is closely related to `BoxedTitle`, but it offers more low-level control over positioning.

## Position

The prop `position` marks a location on the chart / view. This can be specified with absolute values `[x, y]`, or as fractions of the chart / view dimensions. In the latter case, the prop `units` should be set to `'relative'`.

<Canvas>
    <Story
        name="absolute position"
        args={{
            position: [50, 30],
            size: [40, 26],
            boxStyle: { fill: '#ffffff', stroke: '#222222', strokeWidth: '1px' },
            children: 'Title',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="relative position"
        args={{
            position: [0.5, 0.5],
            size: [120, 26],
            units: 'relative',
            boxStyle: { fill: '#ffffff', stroke: '#222222', strokeWidth: '1px' },
            children: 'Relative position',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Anchors

The prop `anchor` determines what part of the label is aligned with the point on the chart designated by `position`.

<Canvas>
    <Story
        name="anchor top-left corner"
        args={{
            position: [0, 0],
            units: 'relative',
            anchor: [0, 0],
            size: [180, 26],
            boxStyle: { fill: '#ffffff', stroke: '#222222', strokeWidth: '1px' },
            children: 'Anchor in top-left corner',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="anchor top-right corner"
        args={{
            position: [1, 0],
            units: 'relative',
            anchor: [1, 0],
            size: [180, 26],
            boxStyle: { fill: '#ffffff', stroke: '#222222', strokeWidth: '1px' },
            children: 'Anchor in top-right corner',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Translations

The prop `translate` accepts an array `[x, y]`, which shifts the position of the label. The translation works together with other props, in particular `position`, and it can be used to place a label off-center or adjacent to a corner.

<Canvas>
    <Story
        name="translate above center"
        args={{
            position: [0.5, 0.5],
            units: 'relative',
            translate: [0, -40],
            size: [120, 26],
            boxStyle: { fill: '#ffffff', stroke: '#222222', strokeWidth: '1px' },
            children: 'above-center',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="translate away from corner"
        args={{
            position: [0, 0],
            translate: [-10, -10],
            anchor: [1, 1],
            size: [22, 22],
            boxStyle: { fill: '#ffffff', stroke: '#222222', strokeWidth: '1px' },
            children: 'A',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Rotation

The box and the label can be rotated using prop `rotate`.

<Canvas>
    <Story
        name="rotation"
        args={{
            position: [0.5, 0.5],
            units: 'relative',
            size: [80, 26],
            rotate: 15,
            boxStyle: { fill: '#ffffff', stroke: '#222222', strokeWidth: '1px' },
            children: 'rotated',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Styling

It is possible to style the box as well as the text.

<Canvas>
    <Story
        name="styling"
        args={{
            position: [1, 0],
            units: 'relative',
            anchor: [1, 0],
            translate: [-10, 10],
            size: [22, 22],
            boxStyle: { fill: '#994444', strokeWidth: '0px' },
            textStyle: { fill: '#ffffff', fontWeight: 600 },
            children: '1',
        }}
        component={BoxedLabel}
        decorators={[ChartDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>
