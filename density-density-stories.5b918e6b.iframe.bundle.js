"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[2826],{"./examples/density/density.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Circles:()=>Circles,Gradients:()=>Gradients,__namedExportsOrder:()=>__namedExportsOrder,default:()=>density_stories});var gallery=__webpack_require__("./examples/gallery.tsx"),chsk_core_es=__webpack_require__("./packages/core/dist/chsk-core.es.js"),chsk_xy_es=__webpack_require__("./packages/xy/dist/chsk-xy.es.js"),chsk_annotation_es=__webpack_require__("./packages/annotation/dist/chsk-annotation.es.js"),chsk_themes_es=__webpack_require__("./packages/themes/dist/chsk-themes.es.js"),navigation=__webpack_require__("./examples/navigation.tsx"),utils=__webpack_require__("./examples/utils.ts"),TWOPI=2*Math.PI,cos=Math.cos,sin=Math.sin,generateClusterCenters=function generateClusterCenters(n,xInterval,yInterval){for(var result=[];result.length<n;){var x=(0,utils.Hk)(xInterval[0],xInterval[1]),y=(0,utils.Hk)(yInterval[0],yInterval[1]);result.push([x,y])}return result},points2frame=function points2frame(points){return{x:points.map((function(point){return point[chsk_core_es.X]})),y:points.map((function(point){return point[chsk_core_es.Y]}))}},generateClusterFrames=function generateClusterFrames(centers,n,density){void 0===density&&(density=1);var radii=n.map((function(v){return Math.sqrt(v/density)}));return(0,chsk_core_es.y17)(centers.length).map((function(i){return function generateOneClusterPoints(i,centers,n,radii){for(var result=[],_ref=centers[i],x=_ref[0],y=_ref[1],r=(0,chsk_core_es.y17)(n).map((function(v){return Number(radii[i])*Math.sqrt(1+v)/Math.sqrt(n)})),j=0,_loop=function _loop(){var theta=(0,utils.Hk)(0,TWOPI),point=[Number(r[j])*cos(theta)+x,Number(r[j])*sin(theta)+y],accept=!0;centers.map((function(center){return(0,chsk_core_es.IoC)(center,point)})).map((function(d,k){k!==i&&d<Number(radii[k])&&(accept=accept&&Math.random()>.5)})),accept&&result.push(point),j+=1};j<n;)_loop();return result}(i,centers,Number(n[i]),radii)})).map(points2frame)},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),customTheme=(0,chsk_core_es.MJ3)(chsk_themes_es.mr,{line:{arrow:{stroke:"#222222",strokeWidth:2},grid:{stroke:"#dddddd",strokeWidth:1}},text:{arrowLabel:{fill:"#222222",dominantBaseline:"middle"}}}),customScales={variant:"linear",domain:[-70,70]},CustomSubtitle=function CustomSubtitle(_ref){var position=_ref.position,data=(0,chsk_xy_es.D1)().data,msg="This chart summarizes "+data.reduce((function(acc,d){return acc+d[chsk_xy_es.nc]}),0)+" data points using "+data.length+" cells";return(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"subtitle",position,children:msg})},DimensionsArrows=function DimensionsArrows(_ref2){var corner=_ref2.corner,markerId=_ref2.markerId,x=corner[0],y=corner[1];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chsk_core_es.N1A,{x1:x,y1:y,x2:x+80,y2:y,markerEnd:markerId,className:"arrow"},"line-1"),(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"arrowLabel",position:[x+40,y+18],angle:0,children:"dimension 1"},"label-1"),(0,jsx_runtime.jsx)(chsk_core_es.N1A,{x1:x,y1:y,x2:x,y2:y-80,markerEnd:markerId,className:"arrow"},"line-2"),(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"arrowLabel",position:[x-16,y-40],angle:-90,children:"dimension 2"},"label-2")]})},CirclesDensityChart=function CirclesDensityChart(_ref3){var fref=_ref3.fref,chartData=_ref3.chartData,rawData=_ref3.rawData;return(0,chsk_xy_es.HZ)(rawData)?(0,jsx_runtime.jsxs)(chsk_core_es.t1X,{data:chartData,fref,id:"circles",size:[600,480],padding:[70,140,40,30],theme:customTheme,children:[(0,jsx_runtime.jsx)(chsk_annotation_es.yA,{variant:"chevron",id:"am",size:11,style:{strokeWidth:2}}),(0,jsx_runtime.jsxs)(chsk_xy_es.Vd,{data:rawData,x:"x",y:"y",binSize:2.5,scaleX:customScales,scaleY:customScales,children:[(0,jsx_runtime.jsxs)(chsk_core_es.EY,{id:"points",children:[(0,jsx_runtime.jsx)(chsk_xy_es.oz,{}),(0,jsx_runtime.jsx)(chsk_xy_es.ZU,{visible:[!1,!1],symbolR:7,symbolStyle:{strokeWidth:1,stroke:"#222222"}})]}),(0,jsx_runtime.jsx)(DimensionsArrows,{corner:[10,360],markerId:"am"}),(0,jsx_runtime.jsx)(chsk_core_es.s$2,{offset:[10,0],position:[1,1],anchor:[0,1],padding:[0,10,0,10],r:7,itemSize:[80,22],itemPadding:[2,2,2,2],title:"Clusters",symbol:chsk_core_es.jlt,firstOffset:[0,4]}),(0,jsx_runtime.jsx)(chsk_core_es.o5u,{variant:"title",position:[0,-45],children:"Density map"}),(0,jsx_runtime.jsx)(CustomSubtitle,{position:[0,-25]}),(0,jsx_runtime.jsx)(navigation.u,{position:[440,-45],data:!0,image:!0}),(0,jsx_runtime.jsx)(chsk_core_es.m_M,{itemSize:[100,25]})]})]}):null};try{DimensionsArrows.displayName="DimensionsArrows",DimensionsArrows.__docgenInfo={description:"",displayName:"DimensionsArrows",props:{corner:{defaultValue:null,description:"",name:"corner",required:!0,type:{name:"NumericPositionSpec"}},markerId:{defaultValue:null,description:"",name:"markerId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/density/CirclesDensityChart.tsx#DimensionsArrows"]={docgenInfo:DimensionsArrows.__docgenInfo,name:"DimensionsArrows",path:"examples/density/CirclesDensityChart.tsx#DimensionsArrows"})}catch(__react_docgen_typescript_loader_error){}try{CirclesDensityChart.displayName="CirclesDensityChart",CirclesDensityChart.__docgenInfo={description:"",displayName:"CirclesDensityChart",props:{chartData:{defaultValue:null,description:"data object passed to the 'Chart' component",name:"chartData",required:!0,type:{name:'Omit<ChartDataContextProps, "id">'}},fref:{defaultValue:null,description:"ref used to toggle milestones",name:"fref",required:!1,type:{name:"Ref<ChartRef>"}},rawData:{defaultValue:null,description:"raw dataset used for plotting",name:"rawData",required:!0,type:{name:"RawData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/density/CirclesDensityChart.tsx#CirclesDensityChart"]={docgenInfo:CirclesDensityChart.__docgenInfo,name:"CirclesDensityChart",path:"examples/density/CirclesDensityChart.tsx#CirclesDensityChart"})}catch(__react_docgen_typescript_loader_error){}var Oranges=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js"),GradientsDensityChart_customTheme=(0,chsk_core_es.MJ3)(chsk_themes_es.mr,{line:{arrow:{stroke:"#222222",strokeWidth:2},grid:{stroke:"#dddddd",strokeWidth:1}},rect:{boxedTitle:{fillOpacity:0}},text:{arrowLabel:{fill:"#222222",dominantBaseline:"middle"},"label.boxedTitle":{fill:"#222222",fontSize:"16px",fontWeight:600}}}),customColorSpec={variant:"sequential",domain:[0,1],colors:Oranges.A},GradientsDensityChart_customScales={variant:"linear",domain:[-60,60]},customLabelFormat=function customLabelFormat(x){return"data"in x?x.label+"; mean: "+(0,utils.Uz)(Number(x.data)):""},GradientsDensityChart=function GradientsDensityChart(_ref){var fref=_ref.fref,chartData=_ref.chartData,rawData=_ref.rawData;return(0,chsk_xy_es.HZ)(rawData)?(0,jsx_runtime.jsxs)(chsk_core_es.t1X,{data:chartData,fref,id:"gradients",size:[600,310],padding:[80,100,40,40],theme:GradientsDensityChart_customTheme,children:[(0,jsx_runtime.jsx)(chsk_annotation_es.yA,{variant:"chevron",id:"arr",size:11,style:{strokeWidth:2}}),(0,jsx_runtime.jsxs)(chsk_core_es.xA9,{grid:[2,1],spacing:[40,10],children:[(0,jsx_runtime.jsx)(chsk_core_es.Ei_,{index:0,children:(0,jsx_runtime.jsxs)(chsk_xy_es.Vd,{data:rawData,x:"x",y:"y",binSize:2,valueColor:"a",scaleX:GradientsDensityChart_customScales,scaleY:GradientsDensityChart_customScales,scaleColor:customColorSpec,children:[(0,jsx_runtime.jsx)(chsk_xy_es.oz,{}),(0,jsx_runtime.jsx)(chsk_xy_es.ZU,{minDistance:20}),(0,jsx_runtime.jsx)(DimensionsArrows,{corner:[0,200],markerId:"arr"}),(0,jsx_runtime.jsx)(chsk_annotation_es.JX,{variant:"top",distance:15,children:"Variable ‘a‘"}),(0,jsx_runtime.jsx)(chsk_core_es.m_M,{itemSize:[160,25],labelFormat:customLabelFormat})]})}),(0,jsx_runtime.jsx)(chsk_core_es.Ei_,{index:1,children:(0,jsx_runtime.jsxs)(chsk_xy_es.Vd,{data:rawData,x:"x",y:"y",binSize:2,valueColor:"b",scaleX:GradientsDensityChart_customScales,scaleY:GradientsDensityChart_customScales,scaleColor:customColorSpec,children:[(0,jsx_runtime.jsx)(chsk_xy_es.oz,{}),(0,jsx_runtime.jsx)(chsk_xy_es.ZU,{minDistance:20}),(0,jsx_runtime.jsx)(chsk_annotation_es.JX,{variant:"top",distance:15,children:"Variable ‘b‘"}),(0,jsx_runtime.jsx)(DimensionsArrows,{corner:[0,200],markerId:"arr"}),(0,jsx_runtime.jsxs)(chsk_core_es.s$2,{variant:"color",horizontal:!1,offset:[20,0],position:[1,.5],size:[60,160],positionUnits:"relative",sizeUnits:"absolute",anchor:[0,.5],children:[(0,jsx_runtime.jsx)(chsk_core_es.y1b,{position:[0,8],size:[60,24],padding:[0,0,0,0],children:"intensity"},"title"),(0,jsx_runtime.jsx)(chsk_core_es.bCR,{variant:"right",size:[9,120],position:[0,30],gradientId:"grad-sequential"},"legend-color-scale")]}),(0,jsx_runtime.jsx)(navigation.u,{position:[190,-60],data:!0,image:!0}),(0,jsx_runtime.jsx)(chsk_core_es.m_M,{itemSize:[160,25],labelFormat:customLabelFormat})]})})]})]}):null};try{GradientsDensityChart.displayName="GradientsDensityChart",GradientsDensityChart.__docgenInfo={description:"",displayName:"GradientsDensityChart",props:{chartData:{defaultValue:null,description:"data object passed to the 'Chart' component",name:"chartData",required:!0,type:{name:'Omit<ChartDataContextProps, "id">'}},fref:{defaultValue:null,description:"ref used to toggle milestones",name:"fref",required:!1,type:{name:"Ref<ChartRef>"}},rawData:{defaultValue:null,description:"raw dataset used for plotting",name:"rawData",required:!0,type:{name:"RawData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/density/GradientsDensityChart.tsx#GradientsDensityChart"]={docgenInfo:GradientsDensityChart.__docgenInfo,name:"GradientsDensityChart",path:"examples/density/GradientsDensityChart.tsx#GradientsDensityChart"})}catch(__react_docgen_typescript_loader_error){}const density_stories={...gallery.I,title:"Gallery/Density maps"},Circles={name:"circles",args:{generator:function generateCirclesDensityData(){var n=Math.floor((0,utils.Hk)(3,7)),centers=generateClusterCenters(n,[-50,50],[-50,50]),populations=(0,chsk_core_es.y17)(n).map((function(){return Math.floor((0,utils.Hk)(5e3,15e3))})),data=generateClusterFrames(centers,populations,60);return utils.o6.slice(0,n).map((function(id,i){return{id,data:data[i]}}))},chart:CirclesDensityChart}},Gradients={name:"gradients",args:{generator:function generateGradientsDensityData(){var n=Math.floor((0,utils.Hk)(5,12)),centers=generateClusterCenters(n,[-40,40],[-40,40]),populations=(0,chsk_core_es.y17)(n).map((function(){return Math.floor((0,utils.Hk)(2e3,5e3))})),data=generateClusterFrames(centers,populations,30);return data.forEach((function(d){var xInterval=(0,chsk_core_es.YPD)(d.x),xSize=xInterval[1]-xInterval[0],yInterval=(0,chsk_core_es.YPD)(d.y),ySize=yInterval[1]-yInterval[0];d.a=d.x.map((function(v){return(v-xInterval[0])/xSize})),d.b=d.y.map((function(v){return(v-yInterval[0])/ySize}))})),utils.o6.slice(0,n).map((function(id,i){return{id,data:data[i]}}))},chart:GradientsDensityChart}},__namedExportsOrder=["Circles","Gradients"];Circles.parameters={...Circles.parameters,docs:{...Circles.parameters?.docs,source:{originalSource:"{\n  name: 'circles',\n  args: {\n    generator: generateCirclesDensityData,\n    chart: CirclesDensityChart\n  }\n}",...Circles.parameters?.docs?.source}}},Gradients.parameters={...Gradients.parameters,docs:{...Gradients.parameters?.docs,source:{originalSource:"{\n  name: 'gradients',\n  args: {\n    generator: generateGradientsDensityData,\n    chart: GradientsDensityChart\n  }\n}",...Gradients.parameters?.docs?.source}}}},"./node_modules/d3-scale-chromatic/src/diverging/BrBG.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _colors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-scale-chromatic/src/colors.js"),_ramp_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3-scale-chromatic/src/ramp.js"),scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(_colors_js__WEBPACK_IMPORTED_MODULE_0__.A);const __WEBPACK_DEFAULT_EXPORT__=(0,_ramp_js__WEBPACK_IMPORTED_MODULE_1__.A)(scheme)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _colors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-scale-chromatic/src/colors.js"),_ramp_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3-scale-chromatic/src/ramp.js"),scheme=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(_colors_js__WEBPACK_IMPORTED_MODULE_0__.A);const __WEBPACK_DEFAULT_EXPORT__=(0,_ramp_js__WEBPACK_IMPORTED_MODULE_1__.A)(scheme)},"./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,K:()=>scheme});var _colors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-scale-chromatic/src/colors.js"),_ramp_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3-scale-chromatic/src/ramp.js"),scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(_colors_js__WEBPACK_IMPORTED_MODULE_0__.A);const __WEBPACK_DEFAULT_EXPORT__=(0,_ramp_js__WEBPACK_IMPORTED_MODULE_1__.A)(scheme)},"./node_modules/d3-shape/src/curve/bundle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _basis_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-shape/src/curve/basis.js");function Bundle(context,beta){this._basis=new _basis_js__WEBPACK_IMPORTED_MODULE_0__.xO(context),this._beta=beta}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};const __WEBPACK_DEFAULT_EXPORT__=function custom(beta){function bundle(context){return 1===beta?new _basis_js__WEBPACK_IMPORTED_MODULE_0__.xO(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85)}}]);